(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f1d50ea","chunk-0130717b"],{"0481":function(e,t,a){"use strict";var i=a("23e7"),n=a("a2bf"),r=a("7b0b"),o=a("50c4"),c=a("a691"),l=a("65f0");i({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=r(this),a=o(t.length),i=l(t,0);return i.length=n(i,t,t,a,0,void 0===e?1:c(e)),i}})},"3ca3":function(e,t,a){"use strict";var i=a("6547").charAt,n=a("69f3"),r=a("7dd0"),o="String Iterator",c=n.set,l=n.getterFor(o);r(String,"String",(function(e){c(this,{type:o,string:String(e),index:0})}),(function(){var e,t=l(this),a=t.string,n=t.index;return n>=a.length?{value:void 0,done:!0}:(e=i(a,n),t.index+=e.length,{value:e,done:!1})}))},4069:function(e,t,a){var i=a("44d2");i("flat")},6547:function(e,t,a){var i=a("a691"),n=a("1d80"),r=function(e){return function(t,a){var r,o,c=String(n(t)),l=i(a),s=c.length;return l<0||l>=s?e?"":void 0:(r=c.charCodeAt(l),r<55296||r>56319||l+1===s||(o=c.charCodeAt(l+1))<56320||o>57343?e?c.charAt(l):r:e?c.slice(l,l+2):o-56320+(r-55296<<10)+65536)}};e.exports={codeAt:r(!1),charAt:r(!0)}},"89be":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-layout",{attrs:{row:"",wrap:""}},["loaded"===e.loading||"nodata"===e.loading?a("v-flex",{attrs:{xs12:"","d-flex":""}},[a("device-info",{attrs:{dev_id:e.device.dev_id,province:e.device.province,citymun:e.device.citymun,location:e.device.location,status:e.device.status},on:{updatedStatus:e.onUpdatedDeviceStatus}})],1):e._e(),"loading"===e.loading?a("v-flex",{attrs:{xs12:"","d-flex":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":"","pa-4":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1):e._e(),"loaded"===e.loading?a("v-flex",{attrs:{xs12:"","d-flex":""}},[a("v-card-text",{staticClass:"pt-0"},[a("v-layout",{staticStyle:{"max-height":"calc(90vh - 200px)"},attrs:{column:""}},[a("v-flex",{staticStyle:{overflow:"auto"},attrs:{xs12:""}},["last_data"===e.selectedView?a("device-data-peek",{attrs:{data:e.latest_response}}):"table"===e.selectedView?a("device-data-table",{attrs:{data:e.response,columns:e.columns}}):"rainfall"===e.selectedView?a("device-data-rainfall-chart",{attrs:{data:e.rainfall_response,title:e.title}}):"waterlevel"===e.selectedView?a("device-data-waterlevel-chart",{attrs:{data:e.waterlevel_response,title:e.title}}):"heat_index"===e.selectedView?a("device-data-heat-index-chart",{attrs:{data:e.heatindex_response,title:e.title}}):e._e()],1)],1)],1)],1):e._e(),"nodata"===e.loading?a("v-flex",{attrs:{xs12:"","d-flex":""}},[a("v-container",{staticClass:"px-3 pb-3 pt-0 ma-0"},[a("h3",[e._v("No Data")])])],1):e._e(),"loaded"===e.loading||"nodata"===e.loading?a("v-flex",{attrs:{xs12:"","d-flex":""}},[a("v-card-actions",{staticClass:"grey lighten-3"},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs8:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({staticClass:"pa-0",staticStyle:{"min-width":"200px","max-width":"200px"},attrs:{value:e.computedDateFormattedMomentjs(e.selectedDate),"prepend-icon":"event",readonly:"",clearable:""},on:{"click:clear":e.onDateClear}},i))]}}],null,!1,4022347716),model:{value:e.menuDate,callback:function(t){e.menuDate=t},expression:"menuDate"}},[a("v-date-picker",{attrs:{max:e.maxDateWMO,"no-title":"",scrollable:""},on:{input:e.onDateInput},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1)],1),"loaded"===e.loading?a("v-flex",{staticClass:"text-xs-right",attrs:{xs4:""}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedView,expression:"selectedView"}],staticClass:"primary white--text pa-1 text-xs-center",staticStyle:{"border-style":"solid"},attrs:{id:"selectedView"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedView=t.target.multiple?a:a[0]}}},e._l(e.viewSelection,(function(t){return a("option",{key:t.name,domProps:{value:t.value}},[e._v(e._s(t.name))])})),0)]):e._e()],1)],1)],1):e._e()],1)],1)},n=[],r=(a("99af"),a("caad"),a("d81d"),a("c1df")),o=a.n(r),c=a("c0d6"),l=a("d722"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},e._l(e.data,(function(t,i,n){return a("v-text-field",{key:i,attrs:{label:e.$_deviceColumnUnitMixin_withUnit(i),value:t,readonly:""}})})),1)],1)},d=[],u=a("a766"),v={name:"DeviceDataPeek",props:["data"],mixins:[u["b"]],created:function(){console.log("created DeviceDataPeek")},filters:{withUnit:function(e){var t=this.$_deviceColumnUnitMixin_getUnit(e);return""!==t?"".concat(e," (").concat(t,")"):e}}},f=v,h=a("2877"),m=a("6544"),p=a.n(m),g=a("0e8f"),_=a("a722"),b=a("2677"),x=Object(h["a"])(f,s,d,!1,null,"5822e5a1",null),D=x.exports;p()(x,{VFlex:g["a"],VLayout:_["a"],VTextField:b["a"]});var y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1 pa-0 ma-0",attrs:{headers:e.headers,items:e.data,"rows-per-page-items":e.rowsPerPageItems,pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.columns,(function(i){return a("td",[e._v(e._s(t.item[i]))])}))}}])})},w=[],S={name:"DeviceDataTable",props:["data","columns"],mixins:[u["b"]],created:function(){console.log("created DeviceDatatable")},computed:{headers:function(){var e=this,t=[];return t=this.columns.map((function(t){var a=e.$_deviceColumnUnitMixin_getUnit(t);return{text:""!==a?"".concat(t," (").concat(a,")"):t,value:t,align:"left"}})),t}},data:function(){return{rowsPerPageItems:[10,20,30,40,{text:"All",value:-1}],pagination:{rowsPerPage:10,sortBy:"Datetime Read",descending:!0}}}},O=S,C=(a("b27b"),a("8fea")),k=Object(h["a"])(O,y,w,!1,null,"401e27a1",null),V=k.exports;p()(k,{VDataTable:C["a"]});a("4160"),a("acd8"),a("159b");var A,j,R,T,M,P,$=a("1fca"),I=a("bbf4"),W={extends:$["a"],name:"DeviceDataRainfallChart",props:["data","title"],mixins:[I["b"]],mounted:function(){console.log("created DeviceDataRainfallChart"),this.loadrainchart()},methods:{loadrainchart:function(){var e=[],t=[];this.data.forEach((function(a){var i=o()(a["Datetime Read"],"YYYY-MM-DD HH:mm:ss");e.push({t:i.valueOf(),y:parseFloat(a["Rainfall Amount"])}),t.push({t:i.valueOf(),y:parseFloat(a["Rain Cumulative"])})})),this.$_rainfallChartMixin_setRainfall(e),this.$_rainfallChartMixin_setRainCumulative(t);var a="[NODATA]",i=this.data.length;i>0&&(a=this.data[i-1]["Datetime Read"]+" -- "+this.data[i-1]["Rain Cumulative"]+" mm");var n=[this.title,a];this.$_rainfallChartMixin_setTitle(n),this.$_rainfallChartMixin_render()}},watch:{data:function(e,t){console.log("data updated"),this.loadrainchart()}}},F=W,L=Object(h["a"])(F,A,j,!1,null,"7e5e3d58",null),U=L.exports,E={extends:$["c"],name:"DeviceDataWaterlevelChart",props:["data","title"],mixins:[I["c"]],mounted:function(){this.loadwaterlevelchart()},methods:{loadwaterlevelchart:function(){var e=this.data.map((function(e){var t=o()(e["Datetime Read"],"YYYY-MM-DD HH:mm:ss");return{t:t.valueOf(),y:parseFloat(e["Waterlevel"])}}));this.$_waterlevelChartMixin_setWaterlevel(e);var t="[NODATA]",a=this.data.length;a>0&&(t=this.data[a-1]["Datetime Read"]+" -- "+this.data[a-1]["Waterlevel"]+" m");var i=[this.title,t];this.$_waterlevelChartMixin_setTitle(i),this.$_waterlevelChartMixin_render()}},watch:{data:function(e,t){console.log("data updated"),this.loadwaterlevelchart()}}},H=E,Y=Object(h["a"])(H,R,T,!1,null,"60beb464",null),B=Y.exports,N=(a("e25e"),{extends:$["c"],name:"DeviceDataHeatIndex",mixins:[I["a"]],props:["data","title"],mounted:function(){this.loadheatindexchart()},methods:{loadheatindexchart:function(){var e=[],t=[];this.data.forEach((function(a){var i=o()(a["Datetime Read"],"YYYY-MM-DD HH:mm:ss");e.push({t:i.valueOf(),y:parseFloat(a["Air Temperature"])}),t.push({t:i.valueOf(),y:parseInt(a["Heat Index"])})})),this.$_heatIndexChartMixin_setTemperature(e),this.$_heatIndexChartMixin_setHeatIndex(t);var a="[NODATA]",i=this.data.length;i>0&&(a=this.data[i-1]["Datetime Read"]+" -- "+this.data[i-1]["Air Temperature"]+" / "+this.data[i-1]["Heat Index"]+" Â°C");var n=[this.title,a];this.$_heatIndexChartMixin_setTitle(n),this.$_heatIndexChartMixin_render()}},watch:{data:function(e,t){console.log("data updated"),this.loadheatindexchart()}}}),z=N,J=Object(h["a"])(z,M,P,!1,null,"425d5a94",null),G=J.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card-title",{staticClass:"pb-1",attrs:{"primary-title":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{grow:""}},[a("h3",{staticClass:"mb-0"},[e._v(e._s(e.citymun)+" - "+e._s(e.province)+" ("+e._s(e.dev_id)+")"),a("v-icon",{staticClass:"ml-2",attrs:{color:"secondary"},on:{click:function(e){}}},[e._v("edit")])],1),a("div",[e._v(" "+e._s(e.location))])]),a("v-flex",{attrs:{shrink:""}},[e.loading?a("div",[a("v-chip",{attrs:{"text-color":"white",small:""}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"18",color:"secondary"}})],1)],1):a("div",[0===e.selectedStatus||e.selectionMode?a("v-chip",{attrs:{color:"green","text-color":"white",small:""},on:{click:function(t){return e.onToggle(0)}}},[e._v(" Enabled "),a("v-icon",{attrs:{right:""}},[e._v("check_circle")])],1):e._e(),1===e.selectedStatus||e.selectionMode?a("v-chip",{attrs:{color:"red darken-1","text-color":"white",small:""},on:{click:function(t){return e.onToggle(1)}}},[e._v(" Disabled "),a("v-icon",{attrs:{right:""}},[e._v("error")])],1):e._e(),2===e.selectedStatus||e.selectionMode?a("v-chip",{attrs:{color:"red darken-1","text-color":"white",small:""},on:{click:function(t){return e.onToggle(2)}}},[e._v(" Disabled Rain "),a("v-icon",{attrs:{right:""}},[e._v("error")])],1):e._e(),3===e.selectedStatus||e.selectionMode?a("v-chip",{attrs:{color:"red darken-1","text-color":"white",small:""},on:{click:function(t){return e.onToggle(3)}}},[e._v(" Disabled Water Level "),a("v-icon",{attrs:{right:""}},[e._v("error")])],1):e._e()],1)])],1)],1)],1)},K=[],Q=(a("a4d3"),a("4de4"),a("e439"),a("dbb4"),a("b64b"),a("2532"),a("ade3")),X=a("2f62");function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){Object(Q["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var te={created:function(){console.log("permissionsMixin")},computed:ee({},Object(X["b"])(["userPermissions"])),methods:{$__permissionsMixin_canUpdateDeviceInfo:function(){return this.userPermissions.includes("device-update-status")}}},ae={name:"DeviceInfo",props:["dev_id","province","citymun","location","status"],mixins:[te],created:function(){console.log("created DeviceInfo"),this.selectedStatus=this.status},data:function(){return{selectedStatus:-1,selectionMode:!1,loading:!1}},methods:{onToggle:function(e){var t=this;if(!this.$__permissionsMixin_canUpdateDeviceInfo())return!1;this.selectionMode?(this.loading=!0,this.$nextTick((function(){Object(l["N"])(t.dev_id,e).then((function(a){a.data.success&&(t.selectedStatus=e,t.$emit("updatedStatus",{dev_id:t.dev_id,status:e}))})).catch((function(e){console.log(e)})),t.loading=!1,t.selectionMode=!1}))):this.selectionMode=!0}}},ie=ae,ne=a("12b2"),re=a("cc20"),oe=a("132d"),ce=a("490a"),le=Object(h["a"])(ie,q,K,!1,null,"51ae559a",null),se=le.exports;p()(le,{VCardTitle:ne["a"],VChip:re["a"],VFlex:g["a"],VIcon:oe["a"],VLayout:_["a"],VProgressCircular:ce["a"]});var de=a("0261"),ue={name:"DeviceDataLatest",props:["dev_id"],mixins:[de["a"]],components:{DeviceDataPeek:D,DeviceDataTable:V,DeviceDataRainfallChart:U,DeviceDataWaterlevelChart:B,DeviceDataHeatIndexChart:G,DeviceInfo:se},created:function(){var e=this;console.log("created DeviceView"),this.selectedDate=c["a"].getters.getDevicesLastDate,Object(l["i"])(this.dev_id).then((function(t){c["a"].commit("clearErrors"),e.device.dev_id=t.data.dev_id,e.device.citymun=t.data.citymun_desc,e.device.province=t.data.province_desc,e.device.location=t.data.locationDesc,e.device.status=t.data.status,e.device.type_name=t.data.type_name,e.title="".concat(e.device.citymun," - ").concat(e.device.location," (").concat(e.device.dev_id,")"),["VAISALA","Rain1","Rain2","UAAWS","BSWM_Lufft","Davis"].includes(e.device.type_name)?e.selectedView="rainfall":["Waterlevel","Waterlevel & Rain 2"].includes(e.device.type_name)&&(e.selectedView="waterlevel"),e.loadDeviceData()})).catch((function(){c["a"].commit("setErrors",["Cannot connect to server. Please try again."]),e.$emit("error-loading")}))},computed:{viewSelection:function(){var e=[{name:"Last Data",icon:"remove_red_eye",color:"primary",value:"last_data"},{name:"Table",icon:"table_chart",color:"amber",value:"table"}];return["VAISALA","Rain1","Rain2","Waterlevel & Rain 2","UAAWS","BSWM_Lufft","Davis"].includes(this.device.type_name)&&e.push({name:"Rainfall",icon:"cloud",color:"green",value:"rainfall"}),["Waterlevel","Waterlevel & Rain 2"].includes(this.device.type_name)&&e.push({name:"Waterlevel",icon:"waves",color:"blue",value:"waterlevel"}),["VAISALA","UAAWS","BSWM_Lufft","Davis"].includes(this.device.type_name)&&e.push({name:"Heat Index",icon:"ac_unit",color:"purple",value:"heat_index"}),e},latest_response:function(){var e=this.response.length;return"Datetime Read"in this.response[e-1]?this.response[e-1]:"dateTimeRead"in this.response[0]?this.response[0]:void 0},rainfall_response:function(){return this.response.map((function(e){return{"Datetime Read":e["Datetime Read"],"Rainfall Amount":e["Rainfall Amount"],"Rain Cumulative":e["Rain Cumulative"]}}))},waterlevel_response:function(){return this.response.map((function(e){return{"Datetime Read":e["Datetime Read"],Waterlevel:e["Waterlevel"]}}))},heatindex_response:function(){return this.response.map((function(e){return{"Datetime Read":e["Datetime Read"],"Air Temperature":e["Air Temperature"],"Heat Index":e["Heat Index"]}}))}},data:function(){return{device:{dev_id:0,citymun:"",province:"",location:"",status:0,type_name:""},loading:"loading",response:[],columns:[],title:"",selectedView:"last_data",menuDate:"",selectedDate:""}},methods:{loadDeviceData:function(){var e,t=this;e=""===this.selectedDate||this.selectedDate===this.nowDateISOStr?Object(l["B"])(this.dev_id):Object(l["g"])(this.dev_id,this.selectedDate),e.then((function(e){c["a"].commit("clearErrors");var a=e.data.Data.length;0!==a&&("Datetime Read"in e.data.Data[a-1]||"dateTimeRead"in e.data.Data[0])?(t.response=e.data.Data,t.columns=e.data.Columns,t.loading="loaded"):t.loading="nodata"})).catch((function(e){c["a"].commit("setErrors",["Cannot connect to server. Please try again."]),t.$emit("error-loading")}))},onDateClear:function(){console.log("onDateClear"),this.selectedDate=""},onDateInput:function(e){this.menuDate=!1,console.log(e)},onUpdatedDeviceStatus:function(e){console.log("onUpdatedDeviceStatus"),this.$emit("deviceUpdatedStatus",e)}},watch:{selectedDate:function(e,t){console.log("selectedDate Updating ".concat(t," ---to--- ").concat(e)),e!==c["a"].getters.getDevicesLastDate&&(c["a"].commit("setDevicesLastDate",e),this.loadDeviceData())}}},ve=ue,fe=a("b0af"),he=a("99d9"),me=a("a523"),pe=a("2e4b"),ge=a("e449"),_e=Object(h["a"])(ve,i,n,!1,null,"2ca960de",null);t["default"]=_e.exports;p()(_e,{VCard:fe["a"],VCardActions:he["a"],VCardText:he["b"],VContainer:me["a"],VDatePicker:pe["a"],VFlex:g["a"],VLayout:_["a"],VMenu:ge["a"],VProgressCircular:ce["a"],VTextField:b["a"]})},"99d9":function(e,t,a){"use strict";var i=a("80d2"),n=a("b0af"),r=a("adda"),o=a("d9bd"),c=r["a"].extend({name:"v-card-media",mounted:function(){Object(o["d"])("v-card-media",this.src?"v-img":"v-responsive",this)}}),l=a("12b2");a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return d}));var s=Object(i["g"])("v-card__actions"),d=Object(i["g"])("v-card__text");n["a"],l["a"]},a2bf:function(e,t,a){"use strict";var i=a("e8b5"),n=a("50c4"),r=a("0366"),o=function(e,t,a,c,l,s,d,u){var v,f=l,h=0,m=!!d&&r(d,u,3);while(h<c){if(h in a){if(v=m?m(a[h],h,t):a[h],s>0&&i(v))f=o(e,t,v,n(v.length),f,s-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=v}f++}h++}return f};e.exports=o},aa72:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{column:""}},[e.loaded&&!e.errorFromServer?a("v-flex",{attrs:{"d-flex":""}},[a("v-card",{attrs:{raised:""}},[a("v-card-title",[a("v-layout",{attrs:{"align-center":"","justify-start":"",row:""}},[a("v-flex",{attrs:{xs12:"",md7:"",lg6:""}},[a("v-text-field",{attrs:{"prepend-icon":"search",label:"Search...","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{shrink:""}},[e.$vuetify.breakpoint.xsOnly?a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialogFilter=!0}}},[a("v-icon",[e._v("filter_list")])],1):a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.dialogFilter=!0}}},[e._v(" Filters "),a("v-icon",{attrs:{right:""}},[e._v("filter_list")])],1)],1),e.isauthenticated?a("v-flex",{attrs:{shrink:""}},[e.$vuetify.breakpoint.xsOnly?a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("add")])],1):a("v-btn",{attrs:{color:"secondary"}},[e._v(" Add Device "),a("v-icon",{attrs:{right:""}},[e._v("add")])],1)],1):e._e()],1)],1)],1)],1):e._e(),e.errorFromServer?a("v-flex",{attrs:{"d-flex":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":"","pa-1":"","ma-1":""}},[a("v-btn",{attrs:{color:"error"},on:{click:e.loadDevices}},[e._v("Try Again")])],1)],1):e._e(),e.loaded&!e.errorFromServer?a("v-flex",{attrs:{"d-flex":"","fill-height":""}},[a("router-view",{attrs:{search:e.search,devices:e.devices,statuses:e.selectedStatus,types:e.selectedTypes},on:{"device-selected":e.onDeviceSelected}})],1):e._e(),a("v-dialog",{attrs:{id:"dialog","max-width":"90vw"},model:{value:e.dialog.show,callback:function(t){e.$set(e.dialog,"show",t)},expression:"dialog.show"}},[e.dialog.show?a("device-data-latest",{attrs:{dev_id:e.dialog.dev_id},on:{"error-loading":function(t){e.dialog.show=!1},deviceUpdatedStatus:e.onDeviceUpdatedStatus}}):e._e()],1),a("v-dialog",{attrs:{"max-width":e.$vuetify.breakpoint.smAndDown?"90vw":"50vw"},model:{value:e.dialogFilter,callback:function(t){e.dialogFilter=t},expression:"dialogFilter"}},[a("v-card",[a("v-list",[a("v-subheader",[e._v(" Filter by Device Type ")]),e._l(e.types,(function(t){return a("v-list-tile",{key:t.text,on:{click:function(e){}}},[a("v-list-tile-avatar",[a("v-icon",{attrs:{color:t.color}},[e._v(e._s(t.icon))])],1),a("v-list-tile-content",{on:{click:function(e){t.model=!t.model}}},[e._v(" "+e._s(t.text)+" ")]),a("v-list-tile-action",[a("v-checkbox",{model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}})],1)],1)})),a("v-divider"),a("v-subheader",[e._v(" Filter by Status ")]),e._l(e.statuses,(function(t){return a("v-list-tile",{key:t.name,on:{click:function(e){}}},[a("v-list-tile-avatar",[a("v-icon",{attrs:{color:t.color}},[e._v(e._s(t.icon))])],1),a("v-list-tile-content",{on:{click:function(e){t.model=!t.model}}},[e._v(" "+e._s(t.text)+" ")]),a("v-list-tile-action",[a("v-checkbox",{model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}})],1)],1)}))],2)],1)],1)],1)},n=[],r=(a("a4d3"),a("e01a"),a("d28b"),a("4de4"),a("0481"),a("4160"),a("d81d"),a("4069"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("ade3")),o=a("c0d6"),c=a("2f62"),l=a("89be"),s=a("a766"),d=a("d722");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={name:"Devices",components:{DeviceDataLatest:l["default"]},mixins:[s["c"]],computed:v({},Object(c["b"])(["isauthenticated","deviceRegion"]),{canmodifydevices:function(){return this.isauthenticated},selectedStatus:function(){var e=this.statuses.map((function(e){if(e.model)return e.value})).filter((function(e){return"undefined"!==typeof e}));return e.length>0?e:[]},selectedTypes:function(){var e=this.types.map((function(e){if(e.model)return e.typeStr})).flat().filter((function(e){return"undefined"!==typeof e}));return e.length>0?e:[]},icon:function(){return this.selectedAllStatus?"check_box":this.selectedSomeStatus?"indeterminate_check_box":"check_box_outline_blank"}}),created:function(){console.log("created Devices"),this.loadDevices(this.regCode)},data:function(){return{devices:[],errorFromServer:!1,statuses:[{text:"Enabled",value:0,icon:"check_circle",color:"green",model:!0},{text:"Disabled",value:1,icon:"error",color:"red",model:!0},{text:"Disabled Rainfall",value:2,icon:"error",color:"red",model:!0},{text:"Disabled Waterlevel",value:3,icon:"error",color:"red",model:!0}],types:[{text:"Automatic Rain Gauge",typeStr:["Rain1","Rain2"],model:!0,icon:"brightness_1",color:"green"},{text:"Water Level Monitoring",typeStr:["Waterlevel"],model:!0,icon:"brightness_1",color:"blue"},{text:"Tandem",typeStr:["Waterlevel & Rain 2"],model:!0,icon:"brightness_1",color:"yellow"},{text:"Automated Weather Station",typeStr:["VAISALA","UAAWS","BSWM_Lufft","UPAWS"],model:!0,icon:"brightness_1",color:"purple"}],dialog:{dev_id:0,show:!1},dialogFilter:!1,search:"",loaded:!1,action:s["a"].view}},methods:{loadDevices:function(){var e,t=this;o["a"].commit("showLoader"),o["a"].commit("clearErrors"),this.errorFromServer=!1,this.devices=[],this.loaded=!1,e="V"===this.regCode?Object(d["h"])():Object(d["j"])(this.regCode),e.then((function(e){o["a"].commit("hideLoader"),t.devices=e.data.devices,t.loaded=!0})).catch((function(e){t.errorFromServer=!0,o["a"].commit("hideLoader"),o["a"].commit("setErrors",["Cannot connect to server. Please try again."])}))},onDeviceSelected:function(e){console.log("onDeviceSelected "+e),this.action===s["a"].view&&(this.dialog.dev_id=e,this.dialog.show=!0)},onDeviceUpdatedStatus:function(e){var t=!0,a=!1,i=void 0;try{for(var n,r=this.devices[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var o=n.value;if(o.dev_id===e.dev_id){o.status=e.status;break}}}catch(c){a=!0,i=c}finally{try{t||null==r.return||r.return()}finally{if(a)throw i}}},onRegCodeChange:function(){console.log("Devices.vue onRegCodeChange()"),this.loadDevices()}},watch:{selectedStatus:function(e,t){console.log(e)}}},h=f,m=a("2877"),p=a("6544"),g=a.n(p),_=a("8336"),b=a("b0af"),x=a("12b2"),D=a("ac7c"),y=a("169a"),w=a("ce7e"),S=a("0e8f"),O=a("132d"),C=a("a722"),k=a("8860"),V=a("ba95"),A=a("40fe"),j=a("c954"),R=a("5d23"),T=a("e0c7"),M=a("2677"),P=Object(m["a"])(h,i,n,!1,null,"628d8164",null);t["default"]=P.exports;g()(P,{VBtn:_["a"],VCard:b["a"],VCardTitle:x["a"],VCheckbox:D["a"],VDialog:y["a"],VDivider:w["a"],VFlex:S["a"],VIcon:O["a"],VLayout:C["a"],VList:k["a"],VListTile:V["a"],VListTileAction:A["a"],VListTileAvatar:j["a"],VListTileContent:R["a"],VSubheader:T["a"],VTextField:M["a"]})},b27b:function(e,t,a){"use strict";var i=a("d665"),n=a.n(i);n.a},d28b:function(e,t,a){var i=a("746f");i("iterator")},d665:function(e,t,a){},ddb0:function(e,t,a){var i=a("da84"),n=a("fdbc"),r=a("e260"),o=a("9112"),c=a("b622"),l=c("iterator"),s=c("toStringTag"),d=r.values;for(var u in n){var v=i[u],f=v&&v.prototype;if(f){if(f[l]!==d)try{o(f,l,d)}catch(m){f[l]=d}if(f[s]||o(f,s,u),n[u])for(var h in r)if(f[h]!==r[h])try{o(f,h,r[h])}catch(m){f[h]=r[h]}}}},e01a:function(e,t,a){"use strict";var i=a("23e7"),n=a("83ab"),r=a("da84"),o=a("5135"),c=a("861d"),l=a("9bf2").f,s=a("e893"),d=r.Symbol;if(n&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},v=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof v?new d(e):void 0===e?d():d(e);return""===e&&(u[t]=!0),t};s(v,d);var f=v.prototype=d.prototype;f.constructor=v;var h=f.toString,m="Symbol(test)"==String(d("test")),p=/^Symbol\((.*)\)[^)]+$/;l(f,"description",{configurable:!0,get:function(){var e=c(this)?this.valueOf():this,t=h.call(e);if(o(u,e))return"";var a=m?t.slice(7,-1):t.replace(p,"$1");return""===a?void 0:a}}),i({global:!0,forced:!0},{Symbol:v})}}}]);