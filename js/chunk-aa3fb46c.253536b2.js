(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa3fb46c","chunk-83c7201e"],{"00b4":function(e,t,a){"use strict";a("ac1f");var i=a("23e7"),r=a("c65b"),n=a("1626"),s=a("825a"),o=a("577e"),l=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),c=/./.test;i({target:"RegExp",proto:!0,forced:!l},{test:function(e){var t=s(this),a=o(e),i=t.exec;if(!n(i))return r(c,t,a);var l=r(i,t,a);return null!==l&&(s(l),!0)}})},"0481":function(e,t,a){"use strict";var i=a("23e7"),r=a("a2bf"),n=a("7b0b"),s=a("07fa"),o=a("5926"),l=a("65f0");i({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=n(this),a=s(t),i=l(t,0);return i.length=r(i,t,t,a,0,void 0===e?1:o(e)),i}})},"107c":function(e,t,a){"use strict";var i=a("d039"),r=a("da84"),n=r.RegExp;e.exports=i((function(){var e=n("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"129f":function(e,t,a){"use strict";e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}},"14c3":function(e,t,a){"use strict";var i=a("c65b"),r=a("825a"),n=a("1626"),s=a("c6b6"),o=a("9263"),l=TypeError;e.exports=function(e,t){var a=e.exec;if(n(a)){var c=i(a,e,t);return null!==c&&r(c),c}if("RegExp"===s(e))return i(o,e,t);throw l("RegExp#exec called on incompatible receiver")}},3220:function(e,t,a){},4069:function(e,t,a){"use strict";var i=a("44d2");i("flat")},"4df4":function(e,t,a){"use strict";var i=a("0366"),r=a("c65b"),n=a("7b0b"),s=a("9bdd"),o=a("e95a"),l=a("68ee"),c=a("07fa"),d=a("8418"),u=a("9a1f"),h=a("35a1"),v=Array;e.exports=function(e){var t=n(e),a=l(this),f=arguments.length,_=f>1?arguments[1]:void 0,p=void 0!==_;p&&(_=i(_,f>2?arguments[2]:void 0));var m,g,x,w,b,D,y=h(t),A=0;if(!y||this===v&&o(y))for(m=c(t),g=a?new this(m):v(m);m>A;A++)D=p?_(t[A],A):t[A],d(g,A,D);else for(w=u(t,y),b=w.next,g=a?new this:[];!(x=r(b,w)).done;A++)D=p?s(w,_,[x.value,A],!0):x.value,d(g,A,D);return g.length=A,g}},"742f":function(e,t,a){"use strict";a("3220")},"841c":function(e,t,a){"use strict";var i=a("c65b"),r=a("d784"),n=a("825a"),s=a("7234"),o=a("1d80"),l=a("129f"),c=a("577e"),d=a("dc4a"),u=a("14c3");r("search",(function(e,t,a){return[function(t){var a=o(this),r=s(t)?void 0:d(t,e);return r?i(r,t,a):new RegExp(t)[e](c(a))},function(e){var i=n(this),r=c(e),s=a(t,i,r);if(s.done)return s.value;var o=i.lastIndex;l(o,0)||(i.lastIndex=0);var d=u(i,r);return l(i.lastIndex,o)||(i.lastIndex=o),null===d?-1:d.index}]}))},"89be":function(e,t,a){"use strict";a.r(t);var i,r,n,s,o,l,c=a("b0af"),d=a("99d9"),u=a("a523"),h=a("2e4b"),v=a("0e8f"),f=a("a722"),_=a("e449"),p=a("490a"),m=a("2677"),g=(a("d81d"),a("4de4"),a("d3b7"),function(){var e=this,t=e._self._c;return t(c["a"],[t(f["a"],{attrs:{row:"",wrap:""}},["loaded"===e.loading||"nodata"===e.loading?t(v["a"],{attrs:{xs12:"","d-flex":""}},[t("device-info",{attrs:{dev_id:e.device.dev_id,province:e.device.province,citymun:e.device.citymun,location:e.device.location,status:e.device.status},on:{updatedStatus:e.onUpdatedDeviceStatus}})],1):e._e(),"loading"===e.loading?t(v["a"],{attrs:{xs12:"","d-flex":""}},[t(f["a"],{attrs:{"justify-center":"","align-center":"","pa-4":""}},[t(p["a"],{attrs:{indeterminate:"",color:"primary"}})],1)],1):e._e(),"loaded"===e.loading?t(v["a"],{attrs:{xs12:"","d-flex":""}},[t(d["b"],{staticClass:"pt-0"},[t(f["a"],{staticStyle:{"max-height":"calc(90vh - 200px)"},attrs:{column:""}},[t(v["a"],{staticStyle:{overflow:"auto"},attrs:{xs12:""}},["last_data"===e.selectedView?t("device-data-peek",{attrs:{data:e.latest_response}}):"table"===e.selectedView?t("device-data-table",{attrs:{data:e.response,columns:e.columns}}):"rainfall"===e.selectedView?t("device-data-rainfall-chart",{attrs:{data:e.rainfall_response,title:e.title}}):"waterlevel"===e.selectedView?t("device-data-waterlevel-chart",{attrs:{data:e.waterlevel_response,title:e.title,threshold:e.device_waterlevel_threshold_response}}):"heat_index"===e.selectedView?t("device-data-heat-index-chart",{attrs:{data:e.heatindex_response,title:e.title}}):"thresholds"===e.selectedView?t("device-threshold",{attrs:{data:e.device_waterlevel_threshold_response},on:{threshold_updated:e.onUpdatedThresholds}}):e._e()],1)],1)],1)],1):e._e(),"nodata"===e.loading?t(v["a"],{attrs:{xs12:"","d-flex":""}},[t(u["a"],{staticClass:"px-3 pb-3 pt-0 ma-0"},[t("h3",[e._v("No Data")])])],1):e._e(),"loaded"===e.loading||"nodata"===e.loading?t(v["a"],{attrs:{xs12:"","d-flex":""}},[t(d["a"],{staticClass:"grey lighten-3"},[t(f["a"],{attrs:{row:"",wrap:"","align-center":""}},[t(v["a"],{attrs:{xs8:""}},[t(_["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[t(m["a"],e._g({staticClass:"pa-0",staticStyle:{"min-width":"200px","max-width":"200px"},attrs:{value:e.computedDateFormattedMomentjs(e.selectedDate),"prepend-icon":"event",readonly:"",clearable:""},on:{"click:clear":e.onDateClear}},i))]}}],null,!1,4022347716),model:{value:e.menuDate,callback:function(t){e.menuDate=t},expression:"menuDate"}},[t(h["a"],{attrs:{max:e.maxDateWMO,"no-title":"",scrollable:""},on:{input:e.onDateInput},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1)],1),"loaded"===e.loading?t(v["a"],{staticClass:"text-xs-right",attrs:{xs4:""}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedView,expression:"selectedView"}],staticClass:"primary white--text pa-1 text-xs-center",staticStyle:{"border-style":"solid"},attrs:{id:"selectedView"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedView=t.target.multiple?a:a[0]}}},e._l(e.viewSelection,(function(a){return t("option",{key:a.name,domProps:{value:a.value}},[e._v(e._s(a.name))])})),0)]):e._e()],1)],1)],1):e._e()],1)],1)}),x=[],w=(a("99af"),a("caad"),a("14d9"),a("c1df")),b=a.n(w),D=a("c0d6"),y=a("d722"),A=function(){var e=this,t=e._self._c;return t(f["a"],{attrs:{row:"",wrap:""}},[t(v["a"],{attrs:{xs12:""}},e._l(e.data,(function(a,i,r){return t(m["a"],{key:i,attrs:{label:e.$_deviceColumnUnitMixin_withUnit(i),value:a,readonly:""}})})),1)],1)},S=[],k=a("a766"),R={name:"DeviceDataPeek",props:["data"],mixins:[k["b"]],created:function(){console.log("created DeviceDataPeek")},filters:{withUnit:function(e){var t=this.$_deviceColumnUnitMixin_getUnit(e);return""!==t?"".concat(e," (").concat(t,")"):e}}},C=R,I=a("2877"),M=Object(I["a"])(C,A,S,!1,null,"5822e5a1",null),O=M.exports,T=a("8fea"),W=function(){var e=this,t=e._self._c;return t(T["a"],{staticClass:"elevation-1 pa-0 ma-0",attrs:{headers:e.headers,items:e.data,"rows-per-page-items":e.rowsPerPageItems,pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(a){return e._l(e.columns,(function(i){return t("td",[e._v(e._s(a.item[i]))])}))}}])})},E=[],j={name:"DeviceDataTable",props:["data","columns"],mixins:[k["b"]],created:function(){console.log("created DeviceDatatable")},computed:{headers:function(){var e=this,t=[];return t=this.columns.map((function(t){var a=e.$_deviceColumnUnitMixin_getUnit(t);return{text:""!==a?"".concat(t," (").concat(a,")"):t,value:t,align:"left"}})),t}},data:function(){return{rowsPerPageItems:[10,20,30,40,{text:"All",value:-1}],pagination:{rowsPerPage:10,sortBy:"Datetime Read",descending:!0}}}},$=j,P=(a("742f"),Object(I["a"])($,W,E,!1,null,"401e27a1",null)),U=P.exports,F=(a("159b"),a("1fca")),L=a("bbf4"),V={extends:F["a"],name:"DeviceDataRainfallChart",props:["data","title"],mixins:[L["b"]],mounted:function(){console.log("created DeviceDataRainfallChart"),this.loadrainchart()},methods:{loadrainchart:function(){var e=[],t=[];this.data.forEach((function(a){var i=b()(a["Datetime Read"],"YYYY-MM-DD HH:mm:ss");e.push({t:i.valueOf(),y:parseFloat(a["Rainfall Amount"])}),t.push({t:i.valueOf(),y:parseFloat(a["Rain Cumulative"])})})),this.$_rainfallChartMixin_setRainfall(e),this.$_rainfallChartMixin_setRainCumulative(t);var a="[NODATA]",i=this.data.length;i>0&&(a=this.data[0]["Datetime Read"]+" -- "+this.data[0]["Rain Cumulative"]+" mm");var r=[this.title,a];this.$_rainfallChartMixin_setTitle(r),this.$_rainfallChartMixin_render()}},watch:{data:function(e,t){console.log("data updated"),this.loadrainchart()}}},H=V,Y=Object(I["a"])(H,i,r,!1,null,"2617a8d2",null),G=Y.exports,B={extends:F["c"],name:"DeviceDataWaterlevelChart",props:["data","title","threshold"],mixins:[L["c"]],mounted:function(){this.loadwaterlevelchart()},methods:{loadwaterlevelchart:function(){var e=this.data.map((function(e){var t=b()(e["Datetime Read"],"YYYY-MM-DD HH:mm:ss");return{t:t.valueOf(),y:parseFloat(e["Waterlevel"])}}));this.$_waterlevelChartMixin_setWaterlevel(e);var t="[NODATA]",a=this.data.length;a>0&&(t=this.data[0]["Datetime Read"]+" -- "+this.data[0]["Waterlevel"]+" m");var i=[this.title,t];this.$_waterlevelChartMixin_setTitle(i),this.$_waterlevelChartMixin_setThresholds(this.threshold["water_40"],this.threshold["water_60"],this.threshold["water_80"]),this.$_waterlevelChartMixin_render()}},watch:{data:function(e,t){console.log("data updated"),this.loadwaterlevelchart()}}},N=B,K=Object(I["a"])(N,n,s,!1,null,"263d7bd3",null),z=K.exports,J={extends:F["c"],name:"DeviceDataHeatIndex",mixins:[L["a"]],props:["data","title"],mounted:function(){this.loadheatindexchart()},methods:{loadheatindexchart:function(){var e=[],t=[];this.data.forEach((function(a){var i=b()(a["Datetime Read"],"YYYY-MM-DD HH:mm:ss");e.push({t:i.valueOf(),y:parseFloat(a["Air Temperature"])}),t.push({t:i.valueOf(),y:parseInt(a["Heat Index"])})})),this.$_heatIndexChartMixin_setTemperature(e),this.$_heatIndexChartMixin_setHeatIndex(t);var a="[NODATA]",i=this.data.length;i>0&&(a=this.data[0]["Datetime Read"]+" -- "+this.data[0]["Air Temperature"]+" / "+this.data[0]["Heat Index"]+" Â°C");var r=[this.title,a];this.$_heatIndexChartMixin_setTitle(r),this.$_heatIndexChartMixin_render()}},watch:{data:function(e,t){console.log("data updated"),this.loadheatindexchart()}}},q=J,Q=Object(I["a"])(q,o,l,!1,null,"10b6f47c",null),X=Q.exports,Z=a("12b2"),ee=a("cc20"),te=a("132d"),ae=function(){var e=this,t=e._self._c;return t("div",[t(Z["a"],{staticClass:"pb-1",attrs:{"primary-title":""}},[t(f["a"],{attrs:{row:"",wrap:""}},[t(v["a"],{attrs:{grow:""}},[t("h3",{staticClass:"mb-0"},[e._v(e._s(e.citymun)+" - "+e._s(e.province)+" ("+e._s(e.dev_id)+")")]),t("div",[e._v(" "+e._s(e.location))])]),t(v["a"],{attrs:{shrink:""}},[e.loading?t("div",[t(ee["a"],{attrs:{"text-color":"white",small:""}},[t(p["a"],{attrs:{indeterminate:"",size:"18",color:"secondary"}})],1)],1):t("div",[0===e.selectedStatus||e.selectionMode?t(ee["a"],{attrs:{color:"green","text-color":"white",small:""},on:{click:function(t){return e.onToggle(0)}}},[e._v(" Enabled "),t(te["a"],{attrs:{right:""}},[e._v("check_circle")])],1):e._e(),1===e.selectedStatus||e.selectionMode?t(ee["a"],{attrs:{color:"red darken-1","text-color":"white",small:""},on:{click:function(t){return e.onToggle(1)}}},[e._v(" Disabled "),t(te["a"],{attrs:{right:""}},[e._v("error")])],1):e._e(),2===e.selectedStatus||e.selectionMode?t(ee["a"],{attrs:{color:"red darken-1","text-color":"white",small:""},on:{click:function(t){return e.onToggle(2)}}},[e._v(" Disabled Rain "),t(te["a"],{attrs:{right:""}},[e._v("error")])],1):e._e(),3===e.selectedStatus||e.selectionMode?t(ee["a"],{attrs:{color:"red darken-1","text-color":"white",small:""},on:{click:function(t){return e.onToggle(3)}}},[e._v(" Disabled Water Level "),t(te["a"],{attrs:{right:""}},[e._v("error")])],1):e._e()],1)])],1)],1)],1)},ie=[],re=a("5530"),ne=(a("2532"),a("2f62")),se={created:function(){console.log("permissionsMixin")},computed:Object(re["a"])({},Object(ne["b"])(["userPermissions"])),methods:{$__permissionsMixin_canUpdateDeviceInfo:function(){return this.userPermissions.includes("device-update-status")}}},oe={name:"DeviceInfo",props:["dev_id","province","citymun","location","status"],mixins:[se],created:function(){console.log("created DeviceInfo"),this.selectedStatus=this.status},data:function(){return{selectedStatus:-1,selectionMode:!1,loading:!1}},methods:{onToggle:function(e){var t=this;if(!this.$__permissionsMixin_canUpdateDeviceInfo())return!1;this.selectionMode?(this.loading=!0,this.$nextTick((function(){Object(y["O"])(t.dev_id,e).then((function(a){a.data.success&&(t.selectedStatus=e,t.$emit("updatedStatus",{dev_id:t.dev_id,status:e}))})).catch((function(e){console.log(e)})),t.loading=!1,t.selectionMode=!1}))):this.selectionMode=!0}}},le=oe,ce=Object(I["a"])(le,ae,ie,!1,null,"a26d36a6",null),de=ce.exports,ue=a("8336"),he=function(){var e=this,t=e._self._c;return t(c["a"],[t(f["a"],{attrs:{"justify-center":"","align-center":"",row:"",wrap:""}},[t(v["a"],{attrs:{xs12:""}},[t("h3",[e._v("Water Level Thresholds:")])]),t(v["a"],{attrs:{xs12:"",md3:""}},[t(m["a"],{staticClass:"mx-1 py-2",attrs:{label:"40% (cm):",placeholder:"Enter water level at 40%",outline:"",type:"number","hide-details":""},model:{value:e.water_40,callback:function(t){e.water_40=t},expression:"water_40"}})],1),t(v["a"],{attrs:{xs12:"",md3:""}},[t(m["a"],{staticClass:"mx-1 pb-2",attrs:{label:"60% (cm):",placeholder:"Enter water level at 60%",outline:"","hide-details":"",type:"number"},model:{value:e.water_60,callback:function(t){e.water_60=t},expression:"water_60"}})],1),t(v["a"],{attrs:{xs12:"",md3:""}},[t(m["a"],{staticClass:"mx-1 pb-2",attrs:{label:"80% (cm):",placeholder:"Enter water level at 80%",outline:"","hide-details":"",type:"number"},model:{value:e.water_80,callback:function(t){e.water_80=t},expression:"water_80"}})],1),t(v["a"],{attrs:{xs12:"",md3:""}},[t(m["a"],{staticClass:"mx-1 pb-2",attrs:{label:"Spike Threshold (cm):",placeholder:"Enter abnormal water level rise",outline:"",type:"number"},model:{value:e.spike_thr,callback:function(t){e.spike_thr=t},expression:"spike_thr"}})],1),t(v["a"],{attrs:{xs12:""}},[t("div",{staticClass:"text-xs-center"},[t(ue["a"],{attrs:{disabled:!e.changed},on:{click:e.reset}},[e._v("Reset")]),t(ue["a"],{attrs:{color:"secondary",disabled:!e.changed},on:{click:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[e._v("Save")])],1)])],1)],1)},ve=[],fe={name:"DeviceThreshold",props:["data"],created:function(){this.original_water_40=this.data.water_40,this.original_water_60=this.data.water_60,this.original_water_80=this.data.water_80,this.original_spike_thr=this.data.spike_thr,this.reset()},computed:{changed:function(){return this.water_40!==this.original_water_40||this.water_60!==this.original_water_60||this.water_80!==this.original_water_80||this.spike_thr!==this.original_spike_thr}},data:function(){return{dev_id:"",original_water_40:"",original_water_60:"",original_water_80:"",original_spike_thr:"",water_40:"",water_60:"",water_80:"",spike_thr:"",api_error:"",loaded:!1}},methods:{reset:function(){this.dev_id=this.data.dev_id,this.water_40=this.original_water_40,this.water_60=this.original_water_60,this.water_80=this.original_water_80,this.spike_thr=this.original_spike_thr},save:function(){var e=this;Object(y["P"])({dev_id:parseInt(this.dev_id),water_40:parseInt(this.water_40),water_60:parseInt(this.water_60),water_80:parseInt(this.water_80),spike_thr:parseInt(this.spike_thr)}).then((function(t){e.original_water_40=t.data.water_40,e.original_water_60=t.data.water_60,e.original_water_80=t.data.water_80,e.original_spike_thr=t.data.spike_thr,e.$emit("threshold_updated",t.data)})).catch((function(t){e.reset()}))}}},_e=fe,pe=Object(I["a"])(_e,he,ve,!1,null,"ee74ac1e",null),me=pe.exports,ge=a("0261"),xe={name:"DeviceDataLatest",props:["dev_id","canmodifydevices"],mixins:[ge["a"]],components:{DeviceDataPeek:O,DeviceDataTable:U,DeviceDataRainfallChart:G,DeviceDataWaterlevelChart:z,DeviceDataHeatIndexChart:X,DeviceInfo:de,DeviceThreshold:me},created:function(){var e=this;console.log("created DeviceView"),this.selectedDate=D["a"].getters.getDevicesLastDate,Object(y["i"])(this.dev_id).then((function(t){D["a"].commit("clearErrors"),e.device.dev_id=t.data.dev_id,e.device.citymun=t.data.citymun_desc,e.device.province=t.data.province_desc,e.device.location=t.data.locationDesc,e.device.status=t.data.status,e.device.type_name=t.data.type_name,null!==t.data.threshold&&(e.device.threshold.water_40=t.data.threshold.water_40,e.device.threshold.water_60=t.data.threshold.water_60,e.device.threshold.water_80=t.data.threshold.water_80,e.device.threshold.spike_thr=t.data.threshold.spike_thr),e.title="".concat(e.device.citymun," - ").concat(e.device.location," (").concat(e.device.dev_id,")"),["VAISALA","Rain1","Rain2","UAAWS","BSWM_Lufft","Davis","PAGASA Rain"].includes(e.device.type_name)?e.selectedView="rainfall":["Waterlevel","Waterlevel & Rain 2","PAGASA Waterlevel","PAGASA Waterlevel & Rain"].includes(e.device.type_name)&&(e.selectedView="waterlevel"),e.loadDeviceData()})).catch((function(){D["a"].commit("setErrors",["Cannot connect to server. Please try again."]),e.$emit("error-loading")}))},computed:{viewSelection:function(){var e=[{name:"Last Data",icon:"remove_red_eye",color:"primary",value:"last_data"},{name:"Table",icon:"table_chart",color:"amber",value:"table"}];return["VAISALA","Rain1","Rain2","Waterlevel & Rain 2","UAAWS","BSWM_Lufft","Davis","PAGASA Rain","PAGASA Waterlevel & Rain"].includes(this.device.type_name)&&e.push({name:"Rainfall",icon:"cloud",color:"green",value:"rainfall"}),["Waterlevel","Waterlevel & Rain 2","PAGASA Waterlevel","PAGASA Waterlevel & Rain"].includes(this.device.type_name)&&e.push({name:"Waterlevel",icon:"waves",color:"blue",value:"waterlevel"}),["VAISALA","UAAWS","BSWM_Lufft","Davis"].includes(this.device.type_name)&&e.push({name:"Heat Index",icon:"ac_unit",color:"purple",value:"heat_index"}),this.canmodifydevices&&e.push({name:"Thresholds",icon:"config",color:"purple",value:"thresholds"}),e},latest_response:function(){return this.response[0]},rainfall_response:function(){return this.response.map((function(e){return{"Datetime Read":e["Datetime Read"],"Rainfall Amount":e["Rainfall Amount"],"Rain Cumulative":e["Rain Cumulative"]}}))},waterlevel_response:function(){return this.response.map((function(e){return{"Datetime Read":e["Datetime Read"],Waterlevel:e["Waterlevel"]}}))},heatindex_response:function(){return this.response.map((function(e){return{"Datetime Read":e["Datetime Read"],"Air Temperature":e["Air Temperature"],"Heat Index":e["Heat Index"]}}))},device_waterlevel_threshold_response:function(){return{dev_id:this.device.dev_id,water_40:this.device.threshold.water_40,water_60:this.device.threshold.water_60,water_80:this.device.threshold.water_80,spike_thr:this.device.threshold.spike_thr}}},data:function(){return{device:{dev_id:0,citymun:"",province:"",location:"",status:0,type_name:"",threshold:{water_40:"",water_60:"",water_80:"",spike_thr:""}},loading:"loading",response:[],columns:[],title:"",selectedView:"last_data",menuDate:"",selectedDate:""}},methods:{loadDeviceData:function(){var e,t=this;e=""===this.selectedDate||this.selectedDate===this.nowDateISOStr?Object(y["B"])(this.dev_id):Object(y["g"])(this.dev_id,this.selectedDate),e.then((function(e){D["a"].commit("clearErrors");var a=e.data.Data.length;0===a||!("Datetime Read"in e.data.Data[a-1])&&!("dateTimeRead"in e.data.Data[0])?t.loading="nodata":(t.response=e.data.Data,t.columns=e.data.Columns,t.loading="loaded")})).catch((function(e){D["a"].commit("setErrors",["Cannot connect to server. Please try again."]),t.$emit("error-loading")}))},onDateClear:function(){console.log("onDateClear"),this.selectedDate=""},onDateInput:function(e){this.menuDate=!1,console.log(e)},onUpdatedDeviceStatus:function(e){console.log("onUpdatedDeviceStatus"),this.$emit("deviceUpdatedStatus",e)},onUpdatedThresholds:function(e){console.log(e),this.device.threshold.water_40=e.water_40,this.device.threshold.water_60=e.water_60,this.device.threshold.water_80=e.water_80,this.device.threshold.spike_thr=e.spike_thr}},watch:{selectedDate:function(e,t){console.log("selectedDate Updating ".concat(t," ---to--- ").concat(e)),e!==D["a"].getters.getDevicesLastDate&&(D["a"].commit("setDevicesLastDate",e),this.loadDeviceData())}}},we=xe,be=Object(I["a"])(we,g,x,!1,null,"57a15a25",null);t["default"]=be.exports},9263:function(e,t,a){"use strict";var i=a("c65b"),r=a("e330"),n=a("577e"),s=a("ad6d"),o=a("9f7f"),l=a("5692"),c=a("7c73"),d=a("69f3").get,u=a("fce3"),h=a("107c"),v=l("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,_=f,p=r("".charAt),m=r("".indexOf),g=r("".replace),x=r("".slice),w=function(){var e=/a/,t=/b*/g;return i(f,e,"a"),i(f,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),b=o.BROKEN_CARET,D=void 0!==/()??/.exec("")[1],y=w||D||b||u||h;y&&(_=function(e){var t,a,r,o,l,u,h,y=this,A=d(y),S=n(e),k=A.raw;if(k)return k.lastIndex=y.lastIndex,t=i(_,k,S),y.lastIndex=k.lastIndex,t;var R=A.groups,C=b&&y.sticky,I=i(s,y),M=y.source,O=0,T=S;if(C&&(I=g(I,"y",""),-1===m(I,"g")&&(I+="g"),T=x(S,y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&"\n"!==p(S,y.lastIndex-1))&&(M="(?: "+M+")",T=" "+T,O++),a=new RegExp("^(?:"+M+")",I)),D&&(a=new RegExp("^"+M+"$(?!\\s)",I)),w&&(r=y.lastIndex),o=i(f,C?a:y,T),C?o?(o.input=x(o.input,O),o[0]=x(o[0],O),o.index=y.lastIndex,y.lastIndex+=o[0].length):y.lastIndex=0:w&&o&&(y.lastIndex=y.global?o.index+o[0].length:r),D&&o&&o.length>1&&i(v,o[0],a,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(o[l]=void 0)})),o&&R)for(o.groups=u=c(null),l=0;l<R.length;l++)h=R[l],u[h[0]]=o[h[1]];return o}),e.exports=_},"9bdd":function(e,t,a){"use strict";var i=a("825a"),r=a("2a62");e.exports=function(e,t,a,n){try{return n?t(i(a)[0],a[1]):t(a)}catch(s){r(e,"throw",s)}}},"9f7f":function(e,t,a){"use strict";var i=a("d039"),r=a("da84"),n=r.RegExp,s=i((function(){var e=n("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),o=s||i((function(){return!n("a","y").sticky})),l=s||i((function(){var e=n("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:l,MISSED_STICKY:o,UNSUPPORTED_Y:s}},a2bf:function(e,t,a){"use strict";var i=a("e8b5"),r=a("07fa"),n=a("3511"),s=a("0366"),o=function(e,t,a,l,c,d,u,h){var v,f,_=c,p=0,m=!!u&&s(u,h);while(p<l)p in a&&(v=m?m(a[p],p,t):a[p],d>0&&i(v)?(f=r(v),_=o(e,t,v,f,_,d-1)-1):(n(_+1),e[_]=v),_++),p++;return _};e.exports=o},a630:function(e,t,a){"use strict";var i=a("23e7"),r=a("4df4"),n=a("1c7e"),s=!n((function(e){Array.from(e)}));i({target:"Array",stat:!0,forced:s},{from:r})},aa72:function(e,t,a){"use strict";a.r(t);var i=a("8336"),r=a("b0af"),n=a("12b2"),s=a("ac7c"),o=a("169a"),l=a("ce7e"),c=a("0e8f"),d=a("132d"),u=a("a722"),h=a("8860"),v=a("ba95"),f=a("40fe"),_=a("c954"),p=a("5d23"),m=a("e0c7"),g=a("2677"),x=(a("ac1f"),a("841c"),function(){var e=this,t=e._self._c;return t(u["a"],{attrs:{column:""}},[e.loaded&&!e.errorFromServer?t(c["a"],{attrs:{"d-flex":""}},[t(r["a"],{attrs:{raised:""}},[t(n["a"],[t(u["a"],{attrs:{"align-center":"","justify-start":"",row:""}},[t(c["a"],{attrs:{xs12:"",md7:"",lg6:""}},[t(g["a"],{attrs:{"prepend-icon":"search",label:"Search...","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(c["a"],{attrs:{shrink:""}},[e.$vuetify.breakpoint.xsOnly?t(i["a"],{attrs:{icon:""},on:{click:function(t){e.dialogFilter=!0}}},[t(d["a"],[e._v("filter_list")])],1):t(i["a"],{attrs:{color:"secondary"},on:{click:function(t){e.dialogFilter=!0}}},[e._v(" Filters "),t(d["a"],{attrs:{right:""}},[e._v("filter_list")])],1)],1)],1)],1)],1)],1):e._e(),e.errorFromServer?t(c["a"],{attrs:{"d-flex":""}},[t(u["a"],{attrs:{"justify-center":"","align-center":"","pa-1":"","ma-1":""}},[t(i["a"],{attrs:{color:"error"},on:{click:e.loadDevices}},[e._v("Try Again")])],1)],1):e._e(),e.loaded&!e.errorFromServer?t(c["a"],{attrs:{"d-flex":"","fill-height":""}},[t("router-view",{attrs:{search:e.search,devices:e.devices,statuses:e.selectedStatus,types:e.selectedTypes},on:{"device-selected":e.onDeviceSelected}})],1):e._e(),t(o["a"],{attrs:{id:"dialog","max-width":"90vw"},model:{value:e.dialog.show,callback:function(t){e.$set(e.dialog,"show",t)},expression:"dialog.show"}},[e.dialog.show?t("device-data-latest",{attrs:{dev_id:e.dialog.dev_id,canmodifydevices:e.canmodifydevices},on:{"error-loading":function(t){e.dialog.show=!1},deviceUpdatedStatus:e.onDeviceUpdatedStatus}}):e._e()],1),t(o["a"],{attrs:{"max-width":e.$vuetify.breakpoint.smAndDown?"90vw":"50vw"},model:{value:e.dialogFilter,callback:function(t){e.dialogFilter=t},expression:"dialogFilter"}},[t(r["a"],[t(h["a"],[t(m["a"],[e._v(" Filter by Device Type ")]),e._l(e.types,(function(a){return t(v["a"],{key:a.text,on:{click:function(e){}}},[t(_["a"],[t(d["a"],{attrs:{color:a.color}},[e._v(e._s(a.icon))])],1),t(p["a"],{on:{click:function(e){a.model=!a.model}}},[e._v(" "+e._s(a.text)+" ")]),t(f["a"],[t(s["a"],{model:{value:a.model,callback:function(t){e.$set(a,"model",t)},expression:"item.model"}})],1)],1)})),t(l["a"]),t(m["a"],[e._v(" Filter by Status ")]),e._l(e.statuses,(function(a){return t(v["a"],{key:a.name,on:{click:function(e){}}},[t(_["a"],[t(d["a"],{attrs:{color:a.color}},[e._v(e._s(a.icon))])],1),t(p["a"],{on:{click:function(e){a.model=!a.model}}},[e._v(" "+e._s(a.text)+" ")]),t(f["a"],[t(s["a"],{model:{value:a.model,callback:function(t){e.$set(a,"model",t)},expression:"item.model"}})],1)],1)}))],2)],1)],1)],1)}),w=[];a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("d9e2"),a("fb6a"),a("25f0"),a("a630"),a("00b4");function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function D(e,t){if(e){if("string"===typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?b(e,t):void 0}}function y(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=D(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==a["return"]||a["return"]()}finally{if(o)throw n}}}}var A=a("5530"),S=(a("4de4"),a("d81d"),a("0481"),a("4069"),a("c0d6")),k=a("2f62"),R=a("89be"),C=a("a766"),I=a("d722"),M={name:"Devices",components:{DeviceDataLatest:R["default"]},mixins:[C["c"]],computed:Object(A["a"])(Object(A["a"])({},Object(k["b"])({isauthenticated:"isauthenticated",deviceRegion:"deviceRegion"})),{},{canmodifydevices:function(){return this.isauthenticated},selectedStatus:function(){var e=this.statuses.map((function(e){if(e.model)return e.value})).filter((function(e){return"undefined"!==typeof e}));return e.length>0?e:[]},selectedTypes:function(){var e=this.types.map((function(e){if(e.model)return e.typeStr})).flat().filter((function(e){return"undefined"!==typeof e}));return e.length>0?e:[]},icon:function(){return this.selectedAllStatus?"check_box":this.selectedSomeStatus?"indeterminate_check_box":"check_box_outline_blank"}}),created:function(){console.log("created Devices"),this.loadDevices(this.regCode)},data:function(){return{devices:[],errorFromServer:!1,statuses:[{text:"Enabled",value:0,icon:"check_circle",color:"green",model:!0},{text:"Disabled",value:1,icon:"error",color:"red",model:!0},{text:"Disabled Rainfall",value:2,icon:"error",color:"red",model:!0},{text:"Disabled Waterlevel",value:3,icon:"error",color:"red",model:!0}],types:[{text:"Automatic Rain Gauge",typeStr:["Rain1","Rain2","PAGASA Rain"],model:!0,icon:"brightness_1",color:"green"},{text:"Water Level Monitoring",typeStr:["Waterlevel","PAGASA Waterlevel"],model:!0,icon:"brightness_1",color:"blue"},{text:"Tandem",typeStr:["Waterlevel & Rain 2","PAGASA Waterlevel & Rain"],model:!0,icon:"brightness_1",color:"yellow"},{text:"Automated Weather Station",typeStr:["VAISALA","UAAWS","BSWM_Lufft","UPAWS"],model:!0,icon:"brightness_1",color:"purple"}],dialog:{dev_id:0,show:!1},dialogFilter:!1,search:"",loaded:!1,action:C["a"].view}},methods:{loadDevices:function(){var e,t=this;S["a"].commit("showLoader"),S["a"].commit("clearErrors"),this.errorFromServer=!1,this.devices=[],this.loaded=!1,e="V"===this.regCode?Object(I["h"])():Object(I["j"])(this.regCode),e.then((function(e){S["a"].commit("hideLoader"),t.devices=e.data.devices,t.loaded=!0})).catch((function(e){t.errorFromServer=!0,S["a"].commit("hideLoader"),S["a"].commit("setErrors",["Cannot connect to server. Please try again."])}))},onDeviceSelected:function(e){console.log("onDeviceSelected "+e),this.action===C["a"].view&&(this.dialog.dev_id=e,this.dialog.show=!0)},onDeviceUpdatedStatus:function(e){var t,a=y(this.devices);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.dev_id===e.dev_id){i.status=e.status;break}}}catch(r){a.e(r)}finally{a.f()}},onRegCodeChange:function(){console.log("Devices.vue onRegCodeChange()"),this.loadDevices()}},watch:{selectedStatus:function(e,t){console.log(e)}}},O=M,T=a("2877"),W=Object(T["a"])(O,x,w,!1,null,"3139c9ba",null);t["default"]=W.exports},ac1f:function(e,t,a){"use strict";var i=a("23e7"),r=a("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},d784:function(e,t,a){"use strict";a("ac1f");var i=a("4625"),r=a("cb2d"),n=a("9263"),s=a("d039"),o=a("b622"),l=a("9112"),c=o("species"),d=RegExp.prototype;e.exports=function(e,t,a,u){var h=o(e),v=!s((function(){var t={};return t[h]=function(){return 7},7!==""[e](t)})),f=v&&!s((function(){var t=!1,a=/a/;return"split"===e&&(a={},a.constructor={},a.constructor[c]=function(){return a},a.flags="",a[h]=/./[h]),a.exec=function(){return t=!0,null},a[h](""),!t}));if(!v||!f||a){var _=i(/./[h]),p=t(h,""[e],(function(e,t,a,r,s){var o=i(e),l=t.exec;return l===n||l===d.exec?v&&!s?{done:!0,value:_(t,a,r)}:{done:!0,value:o(a,t,r)}:{done:!1}}));r(String.prototype,e,p[0]),r(d,h,p[1])}u&&l(d[h],"sham",!0)}},fb6a:function(e,t,a){"use strict";var i=a("23e7"),r=a("e8b5"),n=a("68ee"),s=a("861d"),o=a("23cb"),l=a("07fa"),c=a("fc6a"),d=a("8418"),u=a("b622"),h=a("1dde"),v=a("f36a"),f=h("slice"),_=u("species"),p=Array,m=Math.max;i({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var a,i,u,h=c(this),f=l(h),g=o(e,f),x=o(void 0===t?f:t,f);if(r(h)&&(a=h.constructor,n(a)&&(a===p||r(a.prototype))?a=void 0:s(a)&&(a=a[_],null===a&&(a=void 0)),a===p||void 0===a))return v(h,g,x);for(i=new(void 0===a?p:a)(m(x-g,0)),u=0;g<x;g++,u++)g in h&&d(i,u,h[g]);return i.length=u,i}})},fce3:function(e,t,a){"use strict";var i=a("d039"),r=a("da84"),n=r.RegExp;e.exports=i((function(){var e=n(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);